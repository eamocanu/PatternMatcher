another old style implementation
This one handles image pattern matching